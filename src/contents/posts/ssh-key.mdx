---
title: "SSH ν‚¤"
date: "2025-05-08"
description: "SSH ν‚¤μ μ •μμ™€ μƒμ„± λ°©λ²•"
tags:
  - ssh
  - linux
thumbnail: "/thumbnails/ssh.jpg"
---

SSH ν‚¤λ” μ»΄ν“¨ν„° κ°„μ— **μ•μ „ν•κ² ν†µμ‹ ν•κΈ° μ„ν• μ•”νΈν™”λ μΈμ¦ λ°©μ‹**μ΄λ‹¤. νΉν μ„λ²„μ— μ›κ²©μΌλ΅ μ ‘μ†ν•  λ• λΉ„λ°€λ²νΈ λ€μ‹  μ‚¬μ©ν•  μ μμ–΄ λ³΄μ•μ„±κ³Ό νΈμμ„±μ΄ λ›°μ–΄λ‚λ‹¤. SSH(Secure Shell)λ” λ„¤νΈμ›ν¬λ¥Ό ν†µν•΄ λ‹¤λ¥Έ μ»΄ν“¨ν„°μ— μ•μ „ν•κ² μ ‘μ†ν•κ³  λ…λ Ήμ–΄λ¥Ό μ‹¤ν–‰ν•  μ μκ² ν•΄μ£Όλ” ν”„λ΅ν† μ½μ΄λ©°, μ΄λ• μ‚¬μ©ν•λ” μΈμ¦ λ°©μ‹ μ¤‘ ν•λ‚κ°€ SSH ν‚¤ κΈ°λ° μΈμ¦μ΄λ‹¤.

---

## SSH ν‚¤μ κµ¬μ΅°

SSH ν‚¤λ” **μ(Pair)** μΌλ΅ μ΄λ£¨μ–΄μ Έ μλ‹¤.

- **κ³µκ° ν‚¤(Public Key)**: λ„κµ¬μ—κ²λ‚ κ³µκ°ν•΄λ„ λ¬΄λ°©ν• ν‚¤λ΅, μ ‘μ†ν•κ³ μ ν•λ” μ„λ²„μ— μ €μ¥ν•λ‹¤.
- **κ°μΈ ν‚¤(Private Key)**: μ λ€λ΅ μ™Έλ¶€μ— κ³µκ°ν•΄μ„λ” μ• λλ” ν‚¤λ΅, μ ‘μ†ν•λ” ν΄λΌμ΄μ–ΈνΈ(λ³ΈμΈ μ»΄ν“¨ν„°)μ—λ§ λ³΄κ΄€ν•λ‹¤.

μ΄ λ‘ ν‚¤λ” μ„λ΅ μ§μ„ μ΄λ£¨λ©°, ν•μ½μΌλ΅ μ•”νΈν™”ν• λ°μ΄ν„°λ” λ°λ“μ‹ λ°λ€μ½ ν‚¤λ΅λ§ λ³µνΈν™”ν•  μ μλ‹¤. μ΄λ¥Ό **λΉ„λ€μΉ­ ν‚¤ μ•”νΈν™”**λΌκ³  ν•λ‹¤.

---

## SSH ν‚¤ μΈμ¦ λ°©μ‹μ μ‘λ™ μ›λ¦¬

1. μ‚¬μ©μλ” λ¨Όμ € SSH ν‚¤ μμ„ μƒμ„±ν•©λ‹λ‹¤ (`ssh-keygen` λ…λ Ήμ–΄ λ“± μ‚¬μ©).
2. μƒμ„±λ **κ³µκ° ν‚¤**λ¥Ό μ„λ²„μ `~/.ssh/authorized_keys` νμΌμ— λ“±λ΅ν•λ‹¤.
3. ν΄λΌμ΄μ–ΈνΈ(μ‚¬μ©μ μ»΄ν“¨ν„°)λ” **κ°μΈ ν‚¤**λ¥Ό λ³΄κ΄€ν•λ‹¤.
4. μ ‘μ† μ‹, μ„λ²„λ” ν•΄λ‹Ή κ³µκ° ν‚¤μ— ν•΄λ‹Ήν•λ” κ°μΈ ν‚¤λ¥Ό κ°€μ§€κ³  μλ”μ§€λ¥Ό ν™•μΈν•κΈ° μ„ν•΄ μ•”νΈν™”λ λ©”μ‹μ§€λ¥Ό λ³΄λ‚Έλ‹¤.
5. ν΄λΌμ΄μ–ΈνΈλ” κ°μΈ ν‚¤λ΅ μ΄λ¥Ό λ³µνΈν™”ν•΄μ„ μΈμ¦μ„ ν†µκ³Όν•λ‹¤.

μ΄ κ³Όμ •μ—μ„ λΉ„λ°€λ²νΈλ” μ‚¬μ©λμ§€ μ•μΌλ©°, **ν‚¤ νμΌ μμ²΄κ°€ μ‹ λ¶„μ¦ μ—­ν• **μ„ ν•λ‹¤.

---

## SSH ν‚¤μ μ¥μ 

- **λ³΄μ• κ°•ν™”**: λΉ„λ°€λ²νΈλ¥Ό νƒμ·¨λ‹Ήν•κ±°λ‚ μ¶”μΈ΅λ‹Ήν•  μ„ν—μ΄ μ¤„μ–΄λ“ λ‹¤.
- **μλ™ν™” κ°€λ¥**: μ¤ν¬λ¦½νΈλ‚ λ°°μΉ μ‘μ—…μ—μ„ μ‚¬μ©μ κ°μ… μ—†μ΄ μΈμ¦ν•  μ μμ–΄ μλ™ν™”μ— μ λ¦¬νλ‹¤.
- **νΈλ¦¬μ„±**: ν• λ² μ„¤μ •ν•΄ λ‘λ©΄, μ„λ²„ μ ‘μ† μ‹ λ§¤λ² λΉ„λ°€λ²νΈλ¥Ό μ…λ ¥ν•  ν•„μ”κ°€ μ—†λ‹¤.
- **λ‹¤μ¤‘ μ„λ²„ κ΄€λ¦¬μ— μ μ©**: λ™μΌν• κ³µκ° ν‚¤λ¥Ό μ—¬λ¬ μ„λ²„μ— λ“±λ΅ν•΄λ‘λ©΄, ν•λ‚μ κ°μΈ ν‚¤λ΅ μ—¬λ¬ μ„λ²„μ— μ ‘κ·Όν•  μ μλ‹¤.

---

## SSH ν‚¤ μƒμ„±

SSH ν‚¤λ¥Ό μƒμ„±ν•λ”λ°μ—λ” 2κ°€μ§€ λ°©λ²•μ΄ μλ‹¤.

ν•μ§€λ§ νμ‚¬κ°™μ€ κ³³μ—μ„λ” μ„Έλ¶€μ μΈ μ‚¬ν•­μ„ μ„¤μ •ν•λ” κ²½μ°κ°€ λ§κΈ°μ— μλ™μ„ μ¶”μ²ν•λ‹¤.

| λ°©λ²• | νΉμ§• | μ¶”μ² μƒν™© |
| --- | --- | --- |
| 1. gcloud CLIλ΅ μλ™ μƒμ„± | κ°€μ¥ κ°„νΈν•¨.<br />λ…λ Ήμ–΄ ν• μ¤„λ΅ μƒμ„± λ° λ“±λ΅ | μ΄λ³΄μ<br />λΉ λ¥Έ μ‹¤μµμ© |
| 2. μλ™(λ΅μ»¬)λ΅ ssh-keygen μ‚¬μ© | ν‚¤ νμΌ μ§μ ‘ μ μ–΄ κ°€λ¥.<br />μ»¤μ¤ν„°λ§μ΄μ§• μμ  | λ³΄μ• μ”κµ¬ λ†’μ€ ν™κ²½<br />μ‚¬λ‚΄ μ„λ²„ μ—°λ™ |

---

## π”µ λ°©λ²• 1: `gcloud compute ssh`λ΅ μλ™ μƒμ„±

### β… κ³Όμ •

1. gcloud λ…λ Ήμ–΄λ΅ VM μ ‘μ†μ„ μ‹λ„ν•λ‹¤.

```bash
gcloud compute ssh [VM_NAME] --zone=[ZONE]
```

1. λ§μ•½ μ—°κ²°ν•  λ• **λ“±λ΅λ SSH ν‚¤κ°€ μ—†λ‹¤λ©΄**, gcloudκ°€ **λ΅μ»¬μ— μƒ ν‚¤λ¥Ό μƒμ„±ν•κ³ **,
    
    **GCP VMμ— μλ™μΌλ΅ νΌλΈ”λ¦­ ν‚¤λ¥Ό λ“±λ΅**ν•΄μ¤€λ‹¤.
    
2. ν‚¤ νμΌμ€ λ³΄ν†µ λ‹¤μ κ²½λ΅μ— μ €μ¥λλ‹¤:

```bash
~/.ssh/google_compute_engine
~/.ssh/google_compute_engine.pub
```

(λΉ„λ°€λ²νΈ μ—†μ΄ μ ‘μ† κ°€λ¥)

---

### β… μ¥μ 

- λ…λ Ήμ–΄ ν• μ¤„λ΅ λ (μλ™ μƒμ„± + μλ™ λ“±λ΅)
- VM μΈμ¤ν„΄μ¤ λ©”νƒ€λ°μ΄ν„°μ— μλ™μΌλ΅ νΌλΈ”λ¦­ ν‚¤ μ¶”κ°€
- ν‚¤ λ§λ£ μ„¤μ •λ„ μλ™ μ§€μ› (30μΌ κΈ°λ³Έ)

### β… λ‹¨μ 

- ν‚¤ μ΄λ¦„μ΄λ‚ κ²½λ΅ μ»¤μ¤ν„°λ§μ΄μ§•μ΄ μ–΄λ ¤μ›€
- ν‚¤ κ΄€λ¦¬ μ •μ±…(λ³µμ ν‚¤ λ°κΈ‰, κ°•μ  κ°±μ‹  λ“±)μ΄ μ ν•μ μ„

---

## π”µ λ°©λ²• 2: μλ™μΌλ΅ `ssh-keygen`μΌλ΅ μ§μ ‘ μƒμ„±

### β… κ³Όμ •

1. λ΅μ»¬ PCμ—μ„ SSH ν‚¤ μ μƒμ„±

```bash
ssh-keygen -t rsa -f ~/.ssh/my-gcp-key -C [USERNAME]
```

μµμ… μ„¤λ…:

- `t rsa`: RSA ν‚¤ νƒ€μ…μΌλ΅ μƒμ„±
- `f`: νμΌ μ΄λ¦„ μ§€μ •
- `C`: ν‚¤μ— μ£Όμ„(μ‚¬μ©μλ…) μ¶”κ°€
1. μƒμ„±λ νμΌ:

| νμΌ | λ‚΄μ© |
| --- | --- |
| `my-gcp-key` | λΉ„λ°€ ν‚¤ (Private Key) |
| `my-gcp-key.pub` | κ³µκ° ν‚¤ (Public Key) |
1. νΌλΈ”λ¦­ ν‚¤ νμΌ(`.pub`)μ„ λ³µμ‚¬ν•΄μ„ GCPμ— λ“±λ΅
- GCP μ½μ†” β†’ Compute Engine β†’ VM μΈμ¤ν„΄μ¤ β†’ SSH ν‚¤ μ¶”κ°€
- λλ” `gcloud compute instances add-metadata` λ…λ Ήμ–΄ μ‚¬μ©

```bash
gcloud compute instances add-metadata [VM_NAME] \
    --zone=[ZONE] \
    --metadata-from-file ssh-keys=~/.ssh/my-gcp-key.pub
```

1. μ ‘μ† μ‹ μλ™μΌλ΅ ν‚¤ μ§€μ •
- μ°Έκ³ λ΅ EXTERNAL_IPλ” VM μΈμ¤ν„΄μ¤ μ™Έλ¶€ IPλ¥Ό μλ―Έν•λ‹¤.

```bash
ssh -i ~/.ssh/my-gcp-key [USERNAME]@[EXTERNAL_IP]
```

---

### β… μ¥μ 

- ν‚¤ μ΄λ¦„, μ„μΉ, μ£Όμ„ λ“± λ¨λ‘ μ§μ ‘ μ„¤μ • κ°€λ¥
- ν•λ‚μ ν‚¤λ¥Ό μ—¬λ¬ μ„λ²„μ— μ¬μ‚¬μ© κ°€λ¥
- κΈ°μ—… λ³΄μ• μ •μ±…μ— λ§μ¶° μ»¤μ¤ν„°λ§μ΄μ§• κ°€λ¥

### β… λ‹¨μ 

- μλ™ λ“±λ΅, μλ™ κ΄€λ¦¬ ν•„μ”
- μ‹¤μλ΅ κ¶ν•(600) μ„¤μ • μ• ν•λ©΄ λ³΄μ• μ„ν—

---

## π“ μ°Έκ³ : SSH ν‚¤ νμΌ κ¶ν• μ„¤μ •

λΉ„λ°€ν‚¤ νμΌ(`.pem`, `.key`, `id_rsa` λ“±)μ€ λ°λ“μ‹ **κ¶ν•μ„ 600μΌλ΅ μ ν•**ν•΄μ•Ό ν•©λ‹λ‹¤.

```bash
chmod 600 ~/.ssh/my-gcp-key
```

μ• ν•λ©΄ SSH μ ‘μ† μ‹ λ‹¤μ μ—λ¬ λ°μƒ:

```bash
WARNING: UNPROTECTED PRIVATE KEY FILE!
```

---

## β… μ”μ•½: μ–΄λ–¤ λ°©μ‹μ„ μ–Έμ  μ“°λ‚?

| μƒν™© | μ¶”μ² λ°©λ²• |
| --- | --- |
| λΉ λ¥΄κ² GCP VM μ ‘μ†ν•κ³  μ‹¶μ„ λ• | gcloud compute ssh (μλ™ μƒμ„±) |
| ν‚¤λ¥Ό μ§μ ‘ κ΄€λ¦¬ν•κ³  μ‹¶μ„ λ• | ssh-keygen μλ™ μƒμ„± ν›„ μλ™ λ“±λ΅ |
| νμ‚¬/ν€ λ³΄μ• μ •μ±…μ„ λ”°λ¥Ό λ• | ssh-keygen ν›„ μλ™ λ“±λ΅ (κ¶ν• μ„¤μ • μ£Όμ) |

---

## π― κ²°λ΅ 

μ„μ™€ κ°™μ€ λ°©λ²•μΌλ΅ ssh ν‚¤λ¥Ό μƒμ„±ν•  μ μλ‹¤.

sshν‚¤λ” μƒμ„±λλ©΄, μ–΄λκ³³μ—μ„λ“  μ‚¬μ©μ΄ κ°€λ¥ν•λ‹¤. μ©λ„λ³„λ΅ μ΄λ¦„μ„ λ‚λ„μ–΄ keyλ¥Ό μƒμ„±ν•  μ μμ§€λ§, κ·Έλ¬μ§€ μ•κ³  ν•λ‚μ ν‚¤λ΅ μ „λ¶€ μ‚¬μ©ν•λ” κ²ƒλ„ κ°€λ¥ν•λ‹¤λ” λ§μ΄λ‹¤.

μ΄μ  μƒμ„±ν• ν‚¤λ¥Ό κ°€μ§€κ³  μ›ν•λ” κ³³μ— μ‚¬μ©ν•λ©΄ λλ‹¤.